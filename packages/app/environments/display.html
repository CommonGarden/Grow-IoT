<template name="Environment.DisplayComponent">
	{{#if notFound }}
		{{> NotFoundComponent }}
	{{else}}	
		{{#if Template.subscriptionsReady}}
	  	<div class="row dashboard">
				<div class="col-lg-12 margin-right">
					<!-- NOT WORKING -->
					{{#if emptyState}}
						<div class="jumbotron">
							<p>Start growing in this environment by adding devices:</p>
							{{> Environment.NewDeviceComponent}}
<!-- 							<button class="btn btn-lg btn-primary new-device"><i class="glyphicon glyphicon-dashboard"></i> New Device</button> -->
							<!-- Help modal -->
					        <div class="modal fade" id="helpmodal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
					          <div class="modal-dialog">
					            <div class="modal-content">
					              <div class="modal-header">
					                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					                <h4 class="modal-title">Connecting devices</h4>
					              </div>
					              <div class="modal-body">
					                <p>Turn you devices on an make sure they are configured so that the host points to <code>grow.commongarden.org</code>.</p>
					                <p>For more information on creating common garden drivers please see the <a href="https//github.com/CommonGarden/CommonGarden-IoT/">documentation on GitHub</a>.</p>
					              </div><!-- /.modal-body -->
					            </div><!-- /.modal-content -->
					          </div><!-- /.modal-dialog -->
					        </div><!-- /.modal-fade -->
					        <button class="btn btn-lg" data-toggle="modal" data-target="#helpmodal">Help</button>
							<!-- TODO: add plant. I think there should first be a device before we have a plant. -->
<!-- 							<button class="btn btn-lg new-plant"><i class="glyphicon glyphicon-tree-deciduous"></i> New Plant</button> -->
						</div>
					{{else}}
						{{#if devices.exists}}
							<h2>{{ environment.name }}</h2>
							{{> Device.ListComponent}}
						{{/if}}

						{{#if plants.exists}}
							{{> Plant.ListComponent}}
						{{/if}}

						<nav class="navbar navbar-default navbar-fixed-bottom cg-nav-bar">
					    <div class="container">
					      <ul class="nav navbar-nav bottom-menu-action">
					        <li class="new-device">
					          <i class="glyphicon glyphicon-dashboard"></i> New IoT Device
					        </li>
<!-- 					        <li class="new-plant">
					          <i class="glyphicon glyphicon-tree-deciduous"></i> New Plant
					        </li> -->
					        <!-- TODO: should only show if we are capable of making a new rule (ie. there are devices present.) -->
<!-- 					        <li class="new-plant">
					          <i class="glyphicon glyphicon-plus"></i> New Rule
					        </li> -->
					        <!-- / TODO -->
					        <li class="dropdown pull-right">
				            <span class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
				              <i class="glyphicon glyphicon-cog"></i><span class="caret"></span>
				            </span>
				            <ul class="dropdown-menu">
				              <li><a href="#" class="remove">Delete Environment</a></li>
				            </ul>
			            </li>
					      </ul>
					    </div>
					  </nav>
					{{/if}}	
				</div>

			</div>
		{{else}}
			{{> LoaderComponent}}
		{{/if}}
	{{/if}}
</template>
